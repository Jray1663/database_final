<!DOCTYPE html>
<html>
<head>
	<title>小大一的難忘回憶</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<style type="text/css">
		body{
			background-color: #350608;
		}
		.divs{
			text-align: center;
		}
		.divw{
			width: 1161px;
			height: 550px;
			margin:0px auto;
			text-align: center;
			background-color: bisque;
		}
		.div_six{
			width: 600px;
			height: 100px;
			margin:0px auto;
			text-align: center;
		}
        .div_seven{
            width: 600px;
			height: 415px;
			margin:0px auto;
            text-align: center;
        }
	</style>
	
</head>
<script>
    function CorrectForm(){
        setTimeout('', 2000);
        
        $.ajax({

            // 進行要求的網址(URL)
            url: 'http://163.13.226.86:3000/lottery',

            // 要送出的資料 (會被自動轉成查詢字串)
            data: {
                id: document.Post.id.value,
                IId: document.Post.IId.value,
                num: document.Post.num.value
            },

            // 要使用的要求method(方法)，POST 或 GET
            type: 'POST',

            // 資料的類型
            dataType : 'json',
        })
        // 要求成功時要執行的程式碼
        // 回應會被傳遞到回調函式的參數
        .done(function( response ) {
            console.log('OK');
            if(response.lottery){
                if(response.result){
                    alert(response.message+"!!!!<br>您抽到的是  "+response.Wname+"<br>請截圖或拍下照片去實體商店兌獎 code = "+response.winningNum);
                }
                else{
                    alert("很可惜～ "+response.message+" !<br>這邊有屬於你的專屬優惠<br>"+response.Oname+"  "+response.Ocontent);
                }
            }
            else{
                alert(response.message+" 請重新輸入！");
            }
        }) 
        // 要求失敗時要執行的程式碼
        // 狀態碼會被傳遞到回調函式的參數
        .fail(function( xhr, status, errorThrown ) {
            console.log( '出現錯誤，無法完成!' )
            console.log( 'Error: ' + errorThrown )
            console.log( 'Status: ' + status )
            console.dir( xhr )
        })
        // 不論成功或失敗都會執行的回調函式
        .always(function( xhr, status ) {
            console.log( '要求已完成!' )
        })
    }
    function GoDown(){
		$('html,body').scrollTop(400);   /* 返回到最底層 */
    }
</script>
<body onload="GoDown()">
	
	<div class="divs">
		<a href="../../index.html"><img name="First_Image" src="../image/header.png" width="1162px" height="618px"></a>
	</div>
	
	<div class="divs">
		<div  class="btn-group btn-group-lg" role="group" aria-label="Basic example">
			<a id="First_Buttom" class="btn btn btn-info " href="rule.html"  role="button" style="width: 389px;">活動規則</a>
			<a id="Second_Buttom" class="btn btn-warning " href="attention.html" role="button" style="width: 389px;">注意事項</a>
			<a id="Third_Buttom" class="btn btn-primary " href="lottery.html" role="button" style="width: 389px;">開始抽獎</a>
		</div>
	</div>
	<div class="divw">
		<div class="div_six">
            <br>
            <h1 style="color: deeppink">開始抽獎</h1>
        </div>
        <div class="div_seven" style="border-width:5px;border-style:dashed;border-color:#1687a7" >
            <div class="divs"> 
                <br>
                <h2 style="color: #248888">請輸入</h2>
            </div>
            <form id="Post" name="Post" method="POST">
                <div class="form-group">
                    <label for="validationDefaultUsername"><h4>學號</h4></label>
                    <input type="text" class="form-control"  placeholder="407XXXXXX" id="id" name="id" required > 
                </div>
                <div class="form-group">
                    <label for="validationDefaultUsername"><h4>發票號碼</h4></label>
                    <input type="text" class="form-control"  placeholder="八位數數字" id="IId" name="IId" required>
                </div>
                <div class="form-group">
                    <label for="validationDefaultUsername"><h5>請輸入你的幸運號碼 這將影響你是否能夠抽中大獎</h5></label>
                    <input type="text" class="form-control"  placeholder="0~999" id="num" name="num" required>
                </div>
                <input type="button" class="btn btn-primary" value="送出" onclick="CorrectForm()"></input>
            </form>
        </div>
        
	</div>

<script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>;
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</body>
</html>